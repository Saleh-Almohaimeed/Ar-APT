{"cells":[{"cell_type":"code","source":["# LLMs Detection (GPT3.5, and GPT-4o)"],"metadata":{"id":"3JJmwQaO3pRA"},"execution_count":null,"outputs":[]},{"cell_type":"code","execution_count":null,"metadata":{"id":"RWl8Xsq5IXGa"},"outputs":[],"source":["import json\n","import requests\n","import re\n","!pip install openai==0.28\n","import openai\n","openai.organization = \"org-XXX\"\n","openai.api_key = \"sk-API-KEY\"\n","\n","headers = {\n","    'Content-Type': 'application/json',\n","    'Authorization': f'Bearer sk-API-KEY'\n","}\n","\n","openai.Model.list()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"7Zh0btHnpTlq"},"outputs":[],"source":["import json\n","import pandas as pd\n","import re\n","import openai\n","import time\n","\n","model = \"gpt-4o\"\n","\n","\n","\n","# ################ Promting Funtion #####################\n","def ragPrompt(messages):\n","\n","  response = openai.ChatCompletion.create(\n","                  model=model,\n","                  messages=messages\n","               )\n","\n","\n","  result = response.choices[0].message['content']\n","  return result\n","\n","def craftPrompt():\n","        prompt = '''\n","           Determine if the text is generated by AI or by a human, Replay only by AI or Human,\n","          - Note: Give the requested answer without any explaination.\n","          '''\n","\n","        return prompt\n"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"uJ9Mb40_kpNN"},"outputs":[],"source":[]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"background_save":true},"collapsed":true,"id":"sx4O1VMyoNld"},"outputs":[],"source":["import json\n","\n","# Load your JSON file\n","with open('/content/Input.json', 'r', encoding='utf-8') as f:\n","    data = json.load(f)\n","\n","json_file = \"/content/Output.json\"\n","\n","i = 0\n","results = []\n","for item in data:\n","    if item['J_similarity'] > 0.05:\n","      messages = []\n","      messages = [\n","          {\"role\": \"system\", \"content\": \"You are a helpful assistant who always determine if Arabic text is generated by AI or by a human.\"},\n","        ]\n","\n","      prompt = craftPrompt()\n","      prompt = prompt + \"\\n\" + item['Polish_text']\n","      messages.append({\"role\": \"user\", \"content\": prompt})\n","\n","      output = ragPrompt(messages)\n","\n","      print(i)\n","      print(output)\n","      print(\"==============\")\n","      i = i + 1\n","      new_entry = {\n","                \"original\": item['original'],\n","                \"AI/Human\": output,\n","                \"Polish_text\": item['Polish_text'],\n","                \"Polish_Percentage\": item['Polish_Percentage'],\n","                \"domain\": item['domain'],\n","                \"J_similarity\": item['J_similarity']\n","            }\n","      results.append(new_entry)\n","\n","\n","with open(json_file, \"w\", encoding=\"utf-8\") as f:\n","    json.dump(results, f, ensure_ascii=False, indent=2)\n","\n","print(\"✅ Result appended to model_responses.json\")\n"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"psPJpbZ5oRqg"},"outputs":[],"source":["with open('/content/Output.json', 'r', encoding='utf-8') as f:\n","    data = json.load(f)\n","\n","i = 0\n","AI = 0\n","Human = 0\n","for item in data:\n","  i = i + 1\n","  if item[\"AI/Human\"] == \"Human\":\n","    Human = Human + 1\n","  if item[\"AI/Human\"] == \"AI\":\n","    AI = AI + 1\n","\n","\n","print(\"Number of AI Genrated: \",AI)\n","print(\"Number of Human Writer: \",Human)\n","print(\"Acc: \",Human/(Human+AI))\n","print(i)\n","\n"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":41,"status":"ok","timestamp":1757081058275,"user":{"displayName":"Abo Abdullah","userId":"06196110548913097133"},"user_tz":-180},"id":"1YBFFbSVgGnB","outputId":"fa3d7b30-7337-4312-c06f-6c11fe2d1a4f"},"outputs":[{"name":"stdout","output_type":"stream","text":["✅ Result appended to model_responses.json\n"]}],"source":["# Save back to JSON file\n","with open(json_file, \"w\", encoding=\"utf-8\") as f:\n","    json.dump(results, f, ensure_ascii=False, indent=2)\n","\n","print(\"✅ Result appended to model_responses.json\")"]}],"metadata":{"colab":{"provenance":[{"file_id":"1gk9jvBHF04BcoF21dJQXEgX3H14QlYRg","timestamp":1757248655212},{"file_id":"1cwwtAVXmd2JEbEghFYRtPSFecgRZk0Rd","timestamp":1756997683156}],"authorship_tag":"ABX9TyMbq4bHF6JfwhwyxHaJ3rW5"},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}